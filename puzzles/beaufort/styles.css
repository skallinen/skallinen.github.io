/* =========================
   DESIGN TOKENS (Swiss / Helvetica)
   ========================= */
:root{
  /* Layout */
  --footer-h: 64px;
  --footer-base-h: 64px;

  --radius-2: 2px;
  --radius-4: 4px;

  /* Typography */
  --font-sans: "Helvetica Now Text", "Neue Haas Grotesk Text",
               "Helvetica Neue", Helvetica,
               Inter, Roboto, Arial, sans-serif;
  --lh-tight: 1.25;
  --lh-base: 1.5;
  --ls-label: 0.06em;

  /* Neutrals */
  --ink:#0B0B0C;
  --text:#16181C;
  --subtext:#4B4F57;
  --border:#E6E7EA;
  --hairline:#EFF0F2;
  --canvas:#F7F8FA;
  --surface:#FFFFFF;

  /* Semantic */
  --success:#1A7F37;   --success-50:#EAF6EE;
  --warn:#B4690E;      --warn-50:#FFF3E0;
  --danger:#D92D20;    --danger-50:#FDECEC;

  /* Defaults (overridden by themes) */
  --accent-50:#EEF2FF;
  --accent-600:#2F49FF;

  /* Column cues (tints + strokes) â€“ set per theme */
  --col-ms-tint:#EEF2FF;           --col-ms-stroke:#2F49FF;
  --col-knots-tint:#E8F5F2;        --col-knots-stroke:#0A7F5A;
  --col-kmh-tint:#FFF3E8;          --col-kmh-stroke:#B65A1E;
  --col-english-tint:#F2F4F7;      --col-english-stroke:#4B4F57;
  --col-finnish-tint:#EAF6EE;      --col-finnish-stroke:#1A7F37;
  --col-finnishModern-tint:#E6F4EF;--col-finnishModern-stroke:#0A7F5A;
  --col-swedish-tint:#F5EC9;       --col-swedish-stroke:#6E2E8E;
  --col-sea-tint:#FFF8E7;          --col-sea-stroke:#B4690E;
}

/* =========================
   THEMES (palette variants)
   ========================= */
[data-theme="neo"]{
  --accent-50:#EEF2FF; --accent-600:#2F49FF;
  --col-ms-tint:#EEF2FF;           --col-ms-stroke:#2F49FF;
  --col-knots-tint:#E9F6F2;        --col-knots-stroke:#0A7F5A;
  --col-kmh-tint:#FFF3E8;          --col-kmh-stroke:#B65A1E;
  --col-english-tint:#F2F4F7;      --col-english-stroke:#4B4F57;
  --col-finnish-tint:#EAF6EE;      --col-finnish-stroke:#1A7F37;
  --col-finnishModern-tint:#E6F4EF;--col-finnishModern-stroke:#0A7F5A;
  --col-swedish-tint:#F4ECFB;      --col-swedish-stroke:#6E2E8E;
  --col-sea-tint:#FFF8E7;          --col-sea-stroke:#B4690E;
}

[data-theme="radix"]{
  --accent-50:#F1EEFF; --accent-600:#6E56CF;
  --col-ms-tint:#F1EEFF;           --col-ms-stroke:#6E56CF;
  --col-knots-tint:#E9F8F1;        --col-knots-stroke:#2F9E44;
  --col-kmh-tint:#FFF7E6;          --col-kmh-stroke:#F59E0B;
  --col-english-tint:#F1F3F5;      --col-english-stroke:#475569;
  --col-finnish-tint:#ECFDF3;      --col-finnish-stroke:#16A34A;
  --col-finnishModern-tint:#E6FBF7;--col-finnishModern-stroke:#12A594;
  --col-swedish-tint:#F6EDFA;      --col-swedish-stroke:#AB4ABA;
  --col-sea-tint:#FFF4E5;          --col-sea-stroke:#F59E0B;
}

[data-theme="dazed"]{
  --accent-50:#FFE8F3; --accent-600:#FF1F8E;
  --col-ms-tint:#E9EDFF;            --col-ms-stroke:#1B50FF;
  --col-knots-tint:#E6FFF5;         --col-knots-stroke:#00C853;
  --col-kmh-tint:#FFF0E6;           --col-kmh-stroke:#FF6A00;
  --col-english-tint:#E6FAFF;       --col-english-stroke:#00D2FF;
  --col-finnish-tint:#FFE6F3;       --col-finnish-stroke:#FF1F8E;
  --col-finnishModern-tint:#F0E6FF; --col-finnishModern-stroke:#6E00FF;
  --col-swedish-tint:#FFF8DB;       --col-swedish-stroke:#B88600;
  --col-sea-tint:#FFE9EE;           --col-sea-stroke:#FF1744;
}

[data-theme="dutch"]{
  --accent-50:#E6EEFF; --accent-600:#0047FF;
  --col-ms-tint:#E6EEFF;            --col-ms-stroke:#0047FF;
  --col-knots-tint:#E6F7EF;         --col-knots-stroke:#00A85A;
  --col-kmh-tint:#FFF1E9;           --col-kmh-stroke:#FF5E1A;
  --col-english-tint:#F2E9FF;       --col-english-stroke:#7C2AE8;
  --col-finnish-tint:#FFE8EC;       --col-finnish-stroke:#E4002B;
  --col-finnishModern-tint:#FFE6F1; --col-finnishModern-stroke:#FF5DA2;
  --col-swedish-tint:#E6F7FF;       --col-swedish-stroke:#00B3FF;
  --col-sea-tint:#FFF6E0;           --col-sea-stroke:#FFB81C;
}

[data-theme="mono"]{
  --accent-50:#F8FAFC; --accent-600:#0B0B0C;
  --col-ms-tint:#F8FAFC;           --col-ms-stroke:#111827; /* slate-900 */
  --col-knots-tint:#F9FAFB;        --col-knots-stroke:#1F2937; /* gray-800 */
  --col-kmh-tint:#F6F7F9;          --col-kmh-stroke:#334155; /* slate-700 */
  --col-english-tint:#F3F4F6;      --col-english-stroke:#4B5563; /* gray-600 */
  --col-finnish-tint:#FAFAFB;      --col-finnish-stroke:#3F3F46; /* zinc-700 */
  --col-finnishModern-tint:#F5F5F6;--col-finnishModern-stroke:#525252; /* neutral-600 */
  --col-swedish-tint:#FAFAFA;      --col-swedish-stroke:#262626; /* neutral-800 */
  --col-sea-tint:#F7F7F8;          --col-sea-stroke:#0F172A; /* slate-950 */
}

[data-theme="monowarm"]{
  --accent-50:#FAF7F4; --accent-600:#1C1917;
  --col-ms-tint:#FAF7F4;           --col-ms-stroke:#1C1917; /* stone-900 */
  --col-knots-tint:#F7F3F0;        --col-knots-stroke:#3F3A36; /* stone-700 */
  --col-kmh-tint:#F5F1ED;          --col-kmh-stroke:#57534E; /* stone-600 */
  --col-english-tint:#F8F4EF;      --col-english-stroke:#4A403A; /* deep taupe */
  --col-finnish-tint:#FBF6F0;      --col-finnish-stroke:#5B514B; /* warm gray 600 */
  --col-finnishModern-tint:#F7F3EF;--col-finnishModern-stroke:#2B2521; /* near-black brown */
  --col-swedish-tint:#F9F5F1;      --col-swedish-stroke:#6B6058; /* warm gray 500+ */
  --col-sea-tint:#F6F2EE;          --col-sea-stroke:#332D27; /* espresso */
}

/* =========================
   Base / Page
   ========================= */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: var(--font-sans);
  color: var(--text);
  background: var(--canvas);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding: 20px 20px calc(var(--footer-h) + 24px + env(safe-area-inset-bottom)) 20px;
}
body, table { font-variant-numeric: tabular-nums; }

/* Type scale */
h1{font-size:32px;line-height:40px;font-weight:600;margin:0 0 12px}
.lead{color:var(--subtext)}
.label{font-size:12px;line-height:16px;letter-spacing:var(--ls-label);text-transform:uppercase;color:var(--subtext);}

/* Container */
.container{
  max-width: 1400px;
  margin: 0 auto;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-4);
  padding: 24px;
  padding-bottom: calc(var(--footer-h) + 24px + env(safe-area-inset-bottom));
}

/* Instructions */
.instructions{
  border:1px solid var(--border);
  background:#FAFBFD;
  border-radius: var(--radius-4);
  padding:16px 16px;
  margin-bottom:16px;
}
.instructions ol{margin:8px 0 0 18px}
.instructions li{margin:6px 0}

/* Selectors / Theme group */
.selectors{
  display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
  padding:12px 14px;margin-bottom:12px;border:1px solid var(--border);border-radius:var(--radius-4);background:var(--surface);
}
.selectors-left, .selectors-right{display:flex;flex-wrap:wrap;align-items:center;gap:10px}
.selectors .group-title{font-weight:600;margin-right:6px}

.chip{
  display:inline-flex;align-items:center;gap:8px;
  border:1px solid var(--border);border-radius: var(--radius-2);
  padding:6px 10px;background:var(--surface);cursor:pointer;font-size:13px;font-weight:500;
  transition:background .15s ease, border-color .15s ease;
}
.chip:hover{background:#FAFAFC}
.dot{width:8px;height:8px;border-radius:50%}
.chip input{accent-color: var(--accent-600)}

.theme-select{
  border:1px solid var(--border);border-radius:var(--radius-2);
  background:var(--surface);padding:6px 10px;font-weight:500;cursor:pointer;
}

/* Table */
.table-container{overflow-x:auto;border-radius:var(--radius-4); margin-bottom:24px;}
table{width:100%;border-collapse:collapse;background:var(--surface)}
thead th{
  position:sticky;top:0;z-index:2;
  background:var(--surface);
  border-bottom:1px solid var(--border);
  padding:10px 8px;
  font-size:12px;letter-spacing:var(--ls-label);text-transform:uppercase;font-weight:600;color:var(--subtext);
  text-align:center;white-space:nowrap;
}
tbody td{
  border-bottom:1px solid var(--hairline);
  padding:0; /* let the tile fill the whole cell cleanly */
  min-height:44px;vertical-align:middle;text-align:center;
}
tr:nth-child(even) td{background:#FCFCFD}

.beaufort-badge{
  display:inline-block;
  border:1px solid var(--border);
  border-radius: var(--radius-2);
  padding:4px 8px;font-weight:600;margin:12px 0; /* match cell padding */
  background:#FAFAFC;color:var(--ink);
}

/* Drop zones */
.drop-zone{
  position:relative;
  min-height:44px;display:flex;align-items:center;justify-content:center;
  border:1px dashed var(--border);border-radius: var(--radius-2);
  background: #FBFBFD; cursor:pointer; transition: background .15s ease, border-color .15s ease, transform .12s ease;
  margin:6px; /* optical breathing space when empty */
}
.drop-zone:hover{background:#F6F7FA}
.drop-zone.filled{
  border-style:solid;
  margin:0; /* when filled, the tile itself will flush to edges */
}

/* Highlight tints for target column */
.drop-zone.highlight[data-field="ms"]{background:var(--col-ms-tint);border-color:var(--col-ms-stroke)}
.drop-zone.highlight[data-field="knots"]{background:var(--col-knots-tint);border-color:var(--col-knots-stroke)}
.drop-zone.highlight[data-field="kmh"]{background:var(--col-kmh-tint);border-color:var(--col-kmh-stroke)}
.drop-zone.highlight[data-field="english"]{background:var(--col-english-tint);border-color:var(--col-english-stroke)}
.drop-zone.highlight[data-field="finnish"]{background:var(--col-finnish-tint);border-color:var(--col-finnish-stroke)}
.drop-zone.highlight[data-field="finnish_modern"]{background:var(--col-finnishModern-tint);border-color:var(--col-finnishModern-stroke)}
.drop-zone.highlight[data-field="swedish"]{background:var(--col-swedish-tint);border-color:var(--col-swedish-stroke)}
.drop-zone.highlight[data-field="sea"]{background:var(--col-sea-tint);border-color:var(--col-sea-stroke)}

.static-cell{
  min-height:44px;display:flex;align-items:center;justify-content:center;
  color:#9AA0A6;background:#FBFBFD;border:1px dashed transparent;border-radius:var(--radius-2);font-style:italic;margin:6px;
}

/* ====== FULL-CELL TILE ====== */
.placed-tile{
  width:100%; height:100%;
  display:flex;align-items:center;justify-content:center;
  padding:12px 8px;
  border-radius: var(--radius-2);
  color:#fff;font-weight:600;border:0;
  user-select: none;
}
.placed-tile[data-field="ms"]{background:var(--col-ms-stroke)}
.placed-tile[data-field="knots"]{background:var(--col-knots-stroke)}
.placed-tile[data-field="kmh"]{background:var(--col-kmh-stroke)}
.placed-tile[data-field="english"]{background:var(--col-english-stroke)}
.placed-tile[data-field="finnish"]{background:var(--col-finnish-stroke)}
.placed-tile[data-field="finnish_modern"]{background:var(--col-finnishModern-stroke)}
.placed-tile[data-field="swedish"]{background:var(--col-swedish-stroke)}
.placed-tile[data-field="sea"]{background:var(--col-sea-stroke)}

/* ====== CHEAT OVERLAY (peek while pressed) ====== */
.cheat-ghost{
  position:absolute; inset:0;
  display:flex;align-items:center;justify-content:center;
  border-radius:var(--radius-2);
  color:#fff; font-weight:600; opacity:.85;
  pointer-events:none; /* do not steal clicks */
}
.cheat-ghost[data-field="ms"]{background:var(--col-ms-stroke)}
.cheat-ghost[data-field="knots"]{background:var(--col-knots-stroke)}
.cheat-ghost[data-field="kmh"]{background:var(--col-kmh-stroke)}
.cheat-ghost[data-field="english"]{background:var(--col-english-stroke)}
.cheat-ghost[data-field="finnish"]{background:var(--col-finnish-stroke)}
.cheat-ghost[data-field="finnish_modern"]{background:var(--col-finnishModern-stroke)}
.cheat-ghost[data-field="swedish"]{background:var(--col-swedish-stroke)}
.cheat-ghost[data-field="sea"]{background:var(--col-sea-stroke)}

/* Footer (fixed) */
.editor-footer{
  position:fixed;left:0;right:0;bottom:0;min-height: var(--footer-base-h);
  height: auto;
  display:flex;align-items:center;justify-content:space-between;gap:16px;
  padding:10px 20px;background:var(--surface);color: var(--text);
  border-top:1px solid var(--border);z-index:1000;
}
#footerTile{
  max-width: min(70vw, 520px);
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Mobile footer layout */
@media (max-width:640px){
  .editor-footer{
    flex-wrap: wrap;
    align-items: flex-start;
    gap: 8px 12px;
    padding: 10px 12px;
  }
  .editor-footer .footer-section{
  flex: 1 1 100%;
  flex-wrap: wrap;
  justify-content: space-between;
}

  .footer-separator{ display:none; }
  button{ padding:6px 10px; }
  #footerTile{ max-width: 60vw; }
}

.editor-footer .footer-section{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.footer-separator{color:var(--border)}
.metric{font-variant-numeric: tabular-nums;}

/* Buttons */
button{
  border:1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  border-radius: var(--radius-2);
  padding:8px 12px;
  font-weight:500;
  cursor:pointer;
  transition: background .15s ease, border-color .15s ease, transform .1s ease;
}
button:hover{background:#FAFAFC}
button:active{transform:translateY(1px)}
.btn-primary{border-color: var(--accent-600);}
.btn-danger{border-color: var(--danger); color: var(--danger);}

/* Small animations */
.pulse{animation:pulse .28s ease-in-out}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

/* Simple completion modal */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.35);
  display:flex; align-items:center; justify-content:center;
  z-index: 1001;
}
.modal-card{
  background: var(--surface);
  border:1px solid var(--border);
  border-radius: var(--radius-4);
  padding:16px 18px;
  max-width: 420px;
  width: calc(100% - 32px);
  box-shadow: 0 6px 24px rgba(0,0,0,.08);
}
